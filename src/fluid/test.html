<!doctype HTML>
<html>
	<head>
		<title>Fluid dynamics</title>
		<meta charset="utf-8">
		<script src="fluid.js"></script>
		<script src="draw.js"></script>
		<script type="text/javascript">
			function init() {
				var spot    = 8
				var size    = 16
				var refresh = 60
				var fluid   = new Fluid(size, size, 0.5, 0.1)

				var xs = Math.floor(size/2-spot/2)
				var ys = Math.floor(size/2-spot/2)/2
				for (var x = xs; x < xs+spot; x++)
				for (var y = ys; y < ys+spot; y++) {
					fluid.dens[x][y]   = 2
					fluid.vel[x][y][0] = 0
					fluid.vel[x][y][1] = 0.5
				}

				//fluid.step()
				//draw(fluid)

				window.setInterval(function() {
					draw(fluid)
					fluid.step()
				}, 1000/refresh)
			}
		</script>
	</head>
	<body onload="init()">
		<canvas id="fluid" style="width: 512px; height: 512px;" width=512 height=512></canvas>
	</body>
</html>
